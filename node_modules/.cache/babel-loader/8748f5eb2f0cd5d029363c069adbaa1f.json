{"ast":null,"code":"var _jsxFileName = \"/Users/mehulshrinivastava/Documents/multi-file-upload/src/component/upload-file-component.js\";\nimport React, { Component } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport UploadService from '../services/upload-file-service';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class UploadFiles extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedFiles: undefined,\n      progressInfo: [],\n      meassge: [],\n      fileInfo: []\n    };\n  }\n\n  componentDidMount() {\n    UploadService.getFiles().then(response => {\n      this.setState({\n        fileInfos: response.data\n      });\n    });\n  }\n\n  selectFile(event) {\n    this.setState({\n      progressInfo: [],\n      selectedFiles: event.target.files // You can access the list of files from event.target.files, which is a FileList object.\n\n    });\n  }\n\n  uploadFiles() {\n    const selectedFiles = this.state.selectedFiles;\n    let _progressInfos = []; // private variable can't be used outside class (supposed not to be)\n\n    for (let i = 0; i < selectedFiles.length; i++) {\n      _progressInfos.push({\n        percentage: 0,\n        fileName: selectedFiles[i].name\n      });\n    }\n\n    this.setState({\n      progressInfos: _progressInfos,\n      message: []\n    }, () => {\n      for (let i = 0; i < selectedFiles.length; i++) {\n        this.upload(i, selectedFiles[i]);\n      }\n    });\n  }\n\n  upload(idx, file) {\n    let _progressInfos = [...this.state.progressInfos];\n    UploadService.upload(file, event => {\n      _progressInfos[idx].percentage = Math.round(100 * event.loaded / event.total);\n      this.setState({\n        _progressInfos\n      });\n    }).then(response => {\n      this.setState(prev => {\n        let nextMessage = [...prev.message, \"Uploaded the file successfully: \" + file.name];\n        return {\n          message: nextMessage\n        };\n      });\n      return UploadService.getFiles();\n    }).then(files => {\n      this.setState({\n        fileInfos: files.data\n      });\n    }).catch(() => {\n      _progressInfos[idx].percentage = 0;\n      this.setState(prev => {\n        let nextMessage = [...prev.message, \"Could not upload the file: \" + file.name];\n        return {\n          progressInfos: _progressInfos,\n          message: nextMessage\n        };\n      });\n    });\n  }\n\n  render() {\n    const {\n      selectedFiles,\n      progressInfos,\n      message,\n      fileInfos\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [progressInfos && progressInfos.map((progressInfo, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: progressInfo.fileName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar progress-bar-info\",\n            role: \"progressbar\",\n            \"aria-valuenow\": progressInfo.percentage,\n            \"aria-valuemin\": \"0\",\n            \"aria-valuemax\": \"100\",\n            style: {\n              width: progressInfo.percentage + \"%\"\n            },\n            children: [progressInfo.percentage, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row my-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-8\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"btn btn-default p-0\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              multiple: true,\n              onChange: this.selectFiles\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-4\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-success btn-sm\",\n            disabled: !selectedFiles,\n            onClick: this.uploadFiles,\n            children: \"Upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), message.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-secondary\",\n        role: \"alert\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: message.map((item, i) => {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              children: item\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 24\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header\",\n          children: \"List of Files\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-group list-group-flush\",\n          children: fileInfos && fileInfos.map((file, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"list-group-item\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: file.url,\n              children: file.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 19\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/mehulshrinivastava/Documents/multi-file-upload/src/component/upload-file-component.js"],"names":["React","Component","UploadService","UploadFiles","constructor","props","state","selectedFiles","undefined","progressInfo","meassge","fileInfo","componentDidMount","getFiles","then","response","setState","fileInfos","data","selectFile","event","target","files","uploadFiles","_progressInfos","i","length","push","percentage","fileName","name","progressInfos","message","upload","idx","file","Math","round","loaded","total","prev","nextMessage","catch","render","map","index","width","selectFiles","item","url"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport UploadService from '../services/upload-file-service';\n\nexport default class UploadFiles extends Component {\n  constructor(props) {\n  \tsuper(props);\n  \tthis.state = {\n  \t\tselectedFiles: undefined,\n  \t\tprogressInfo: [],\n  \t\tmeassge: [],\n  \t\tfileInfo: [],\n  \t};\n  }\n\n  componentDidMount() {\n    UploadService.getFiles().then((response) => {\n      this.setState({\n        fileInfos: response.data,\n      });\n    });\n  }\n\n  selectFile(event){\n  \tthis.setState({\n  \t\tprogressInfo: [],\n  \t\tselectedFiles: event.target.files,\n  \t\t// You can access the list of files from event.target.files, which is a FileList object.\n  \t});\n  }\n\n  uploadFiles() {\n    const selectedFiles = this.state.selectedFiles;\n\n    let _progressInfos = []; // private variable can't be used outside class (supposed not to be)\n\n    for (let i = 0; i < selectedFiles.length; i++) {\n      _progressInfos.push({ percentage: 0, fileName: selectedFiles[i].name });\n    }\n\n    this.setState(\n      {\n        progressInfos: _progressInfos,\n        message: [],\n      },\n      () => {\n        for (let i = 0; i < selectedFiles.length; i++) {\n          this.upload(i, selectedFiles[i]);\n        }\n      }\n    );\n  }\n\n  upload(idx, file) {\n    let _progressInfos = [...this.state.progressInfos];\n\n    UploadService.upload(file, (event) => {\n      _progressInfos[idx].percentage = Math.round((100 * event.loaded) / event.total);\n      this.setState({\n        _progressInfos,\n      });\n    })\n      .then((response) => {\n        this.setState((prev) => {\n          let nextMessage = [...prev.message, \"Uploaded the file successfully: \" + file.name];\n          return {\n            message: nextMessage\n          };\n        });\n\n        return UploadService.getFiles();\n      })\n      .then((files) => {\n        this.setState({\n          fileInfos: files.data,\n        });\n      })\n      .catch(() => {\n        _progressInfos[idx].percentage = 0;\n        this.setState((prev) => {\n          let nextMessage = [...prev.message, \"Could not upload the file: \" + file.name];\n          return {\n            progressInfos: _progressInfos,\n            message: nextMessage\n          };\n        });\n      });\n  }\n\n  render() {\n    const { selectedFiles, progressInfos, message, fileInfos } = this.state;\n    return (\n      <div>\n        {\n          progressInfos && progressInfos.map((progressInfo, index) => (\n            <div className=\"mb-2\" key={index}>\n              <span>{progressInfo.fileName}</span>\n              <div className=\"progress\">\n                <div\n                  className=\"progress-bar progress-bar-info\"\n                  role=\"progressbar\"\n                  aria-valuenow={progressInfo.percentage}\n                  aria-valuemin=\"0\"\n                  aria-valuemax=\"100\"\n                  style={{ width: progressInfo.percentage + \"%\" }}\n                >\n                  {progressInfo.percentage}%\n                </div>\n              </div>\n            </div>\n          ))}\n\n        <div className=\"row my-3\">\n          <div className=\"col-8\">\n            <label className=\"btn btn-default p-0\">\n              <input type=\"file\" multiple onChange={this.selectFiles} />\n            </label>\n          </div>\n\n          <div className=\"col-4\">\n            <button\n              className=\"btn btn-success btn-sm\"\n              disabled={!selectedFiles}\n              onClick={this.uploadFiles}\n            >\n              Upload\n            </button>\n          </div>\n        </div>\n\n        {message.length > 0 && (\n          <div className=\"alert alert-secondary\" role=\"alert\">\n            <ul>\n              {message.map((item, i) => {\n                return <li key={i}>{item}</li>;\n              })}\n            </ul>\n          </div>\n        )}\n\n        <div className=\"card\">\n          <div className=\"card-header\">List of Files</div>\n          <ul className=\"list-group list-group-flush\">\n            {fileInfos &&\n              fileInfos.map((file, index) => (\n                <li className=\"list-group-item\" key={index}>\n                  <a href={file.url}>{file.name}</a>\n                </li>\n              ))}\n          </ul>\n        </div>\n      </div>\n    \t);\n\t}\n }"]},"metadata":{},"sourceType":"module"}